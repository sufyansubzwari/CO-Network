# types for Users namespace
type Email {
  address: String
  verified: Boolean
}
input EmailType {
  address: String
  verified: Boolean
}

type Profile {
  name: String!
  gender: String
  avatar: String!
}

input ProfileType {
  name: String!
  gender: String
  avatar: String!
}

type Keys {
  auth: String!
  p256dh: String!
}

type Subscription {
  endpoint: String!
  keys: Keys!
}

type User {
  _id: String!
  createdAt: Date!
  services: [String]!
  emails: [Email]
  profile: Profile!
  subscriptions: [Subscription]
  report(project_id: String, startDate: Date, endDate: Date): [ReportUser]
}
type ReportUser {
  totalPlannedHours: Int
  totalLoggedHours: Int
  project: Project
}
input UserType {
  _id: String!
  services: [String]!
  emails: [EmailType]
  profile: ProfileType!
  subscriptions: [SubscriptionInput]
}

input KeysInput {
  auth: String!
  p256dh: String!
}

input SubscriptionInput {
  endpoint: String!
  keys: KeysInput!
}

type Query {
  users(user: UserType!): [User]
  user(_id: String): User
}

type Mutation {
  sendVerificationEmail: User
  saveSubscription(subscription: SubscriptionInput!): User
  deleteSubscription(endpoint: String!): User
  sendPushNotification: User
}
